<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Claim Your Free iPhone!</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      font-family: 'Inter', sans-serif;
      background: linear-gradient(135deg, #ffffff, #fef3c7); /* Light yellow gradient background */
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      margin: 0;
      padding: 1rem;
      box-sizing: border-box;
    }
    .iphone-img {
      width: 350px;
      margin: 10px;
      border: 3px solid gold;
      border-radius: 12px;
      transition: transform 0.3s;
    }
    .iphone-img:hover {
      transform: scale(1.05);
    }
    .free-tag {
      background: gold;
      color: #b91c1c;
      font-weight: bold;
      padding: 0.5em 1em;
      border-radius: 6px;
      margin: 0.5em;
      display: inline-block;
    }
    /* Styles for the initial popup (which triggers the local modal now) */
    .initial-popup-overlay {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 999;
      opacity: 0;
      transition: opacity 0.3s ease-in-out;
    }
    .initial-popup-overlay.show {
      opacity: 1;
    }
    .initial-popup-content {
      background: #fffbea;
      border: 2px solid #facc15;
      padding: 2em;
      border-radius: 10px;
      text-align: center;
      box-shadow: 0 8px 20px rgba(0,0,0,0.2);
      animation: slideUp 0.4s ease-out;
      max-width: 90%;
    }
    @keyframes slideUp {
      from { transform: translateY(50px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }

    /* New: Local Feedback Modal Styles */
    .local-feedback-modal-overlay {
      display: none; /* Hidden by default */
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.7); /* Darker overlay for strong feedback */
      align-items: center;
      justify-content: center;
      z-index: 1000;
      opacity: 0;
      transition: opacity 0.3s ease-in-out;
    }
    .local-feedback-modal-overlay.show {
      display: flex;
      opacity: 1;
    }
    .local-feedback-modal-content {
      background: #fff;
      padding: 2.5rem;
      border-radius: 12px;
      box-shadow: 0 10px 25px rgba(0,0,0,0.3);
      max-width: 90%;
      width: 450px;
      text-align: center;
      transform: translateY(20px);
      opacity: 0;
      transition: transform 0.3s ease-in-out, opacity 0.3s ease-in-out;
    }
    .local-feedback-modal-overlay.show .local-feedback-modal-content {
      transform: translateY(0);
      opacity: 1;
    }
    .local-feedback-modal-content .title-phish {
      color: #dc2626; /* Tailwind red-600 */
    }
    .local-feedback-modal-content .title-good {
      color: #10b981; /* Tailwind green-600 */
    }
  </style>
</head>
<body>

  <main class="flex-grow flex flex-col items-center justify-center p-4">
    <header class="text-center mb-8">
      <h1 class="text-4xl md:text-5xl font-extrabold text-red-600 mb-3">üéâ You Just Won an iPhone!</h1>
      <p class="text-lg md:text-xl font-light text-gray-700 mt-2">Limited Time Offer ‚Äì Claim Yours Now!</p>
    </header>

    <div class="container text-center py-8">
      <div class="flex flex-col sm:flex-row justify-center items-center gap-4 mb-8">
        <img src="iphone15.jpg" alt="iPhone 15" class="w-64 md:w-80 border-4 border-yellow-500 rounded-xl transition-transform duration-300 hover:scale-105 shadow-lg">
        <img src="iphone15.jpg" alt="iPhone 16" class="w-64 md:w-80 border-4 border-yellow-500 rounded-xl transition-transform duration-300 hover:scale-105 shadow-lg">
      </div>
      <div class="flex flex-wrap justify-center gap-3">
        <div class="bg-yellow-500 text-red-700 font-bold px-4 py-2 rounded-md shadow-md">FREE! FREE! FREE!</div>
        <div class="bg-yellow-500 text-red-700 font-bold px-4 py-2 rounded-md shadow-md">Limited Stock!</div>
        <div class="bg-yellow-500 text-red-700 font-bold px-4 py-2 rounded-md shadow-md">No Credit Card Required!</div>
      </div>
    </div>
  </main>

  <!-- Initial Popup (triggers local feedback modal now) -->
  <div class="initial-popup-overlay" id="initial-popup-overlay">
    <div class="initial-popup-content">
      <h2 class="text-3xl font-bold text-red-700 mb-4">üéÅ Congratulations!</h2>
      <p class="text-gray-700 mb-6">Click the button below to claim your iPhone NOW!</p>
      <button onclick="triggerPhishingWarning()"
              class="bg-red-600 text-white px-6 py-3 rounded-lg font-semibold text-lg hover:bg-red-700 transition duration-300 shadow-lg">
        Claim Now
      </button>
    </div>
  </div>

  <!-- New: Local Feedback Modal -->
  <div id="local-feedback-modal-overlay" class="local-feedback-modal-overlay">
    <div class="local-feedback-modal-content">
      <h3 id="local-modal-title" class="text-2xl font-bold mb-4"></h3>
      <p id="local-modal-message" class="text-gray-700 mb-6"></p>
      <button onclick="handleLocalModalClose()"
              class="bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold text-lg hover:bg-blue-700 transition duration-300 shadow-lg">
        Got It!
      </button>
    </div>
  </div>

  <script>
    let simulationId = ''; // To store the ID passed from parent

    // Function to send feedback to the parent (simulate.html) via localStorage
    function sendFeedbackToParentAndClose(title, message, isPhish, simId) {
      localStorage.setItem('simulationFeedback', JSON.stringify({ title, message, isPhish, simulationId: simId }));
      setTimeout(() => {
        window.close(); // Close this tab
      }, 50000); // Short delay for localStorage to save
    }

    // Function to show the local feedback modal
    function showLocalFeedbackModal(title, message, isPhish) {
      const modalOverlay = document.getElementById('local-feedback-modal-overlay');
      const modalTitle = document.getElementById('local-modal-title');
      const modalMessage = document.getElementById('local-modal-message');

      modalTitle.textContent = title;
      modalMessage.textContent = message;

      if (isPhish) {
        modalTitle.classList.remove('title-good');
        modalTitle.classList.add('title-phish');
      } else {
        modalTitle.classList.remove('title-phish');
        modalTitle.classList.add('title-good');
      }

      modalOverlay.classList.add('show');
    }

    // Handle closing the local modal and then sending feedback to parent
    function handleLocalModalClose() {
      document.getElementById('local-feedback-modal-overlay').classList.remove('show');
      // Now send feedback to parent and close the tab
      sendFeedbackToParentAndClose(
        'üö® Warning: Phishing Scam!',
        'This was a simulated "too good to be true" offer. Never click suspicious free offers or enter personal details on such pages.',
        true,
        simulationId
      );
    }

    // Show the initial popup after a delay
    window.onload = function() {
      const urlParams = new URLSearchParams(window.location.search);
      simulationId = localStorage.getItem('currentSimulationId') || 'popup-phishing'; // Get ID or default

      setTimeout(function() {
        document.getElementById('initial-popup-overlay').classList.add('show');
      }, 1000); // Shorter delay for immediate impact
    };

    function triggerPhishingWarning() {
      // Instead of closing, show the local feedback modal
      showLocalFeedbackModal(
        'üö® Warning: Phishing Scam!',
        'This is a simulated "too good to be true" offer. Attackers use enticing promises like free iPhones to trick you into clicking malicious links or giving up personal information. Always be skeptical of unexpected prizes or offers that seem too good to be true.'
      );
    }
  </script>
</body>
</html>
